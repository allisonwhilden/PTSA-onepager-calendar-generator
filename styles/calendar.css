/* Basic styles for A4/Letter one-pager calendar */
@page {
  size: Letter;
  margin: 18pt 18pt 20pt 18pt; /* tighten to fit on one page */
}
:root{
  --bg: #ffffff;
  --ink: #1f2937;
  --muted: #6b7280;
  --accent: #2563eb;
  --no-school: #ef4444;   /* rgb(239,68,68) */
  --half-day: #f59e0b;    /* rgb(245,158,11) */
  --first-last: #10b981;  /* rgb(16,185,129) */
  --early-release: #8b5cf6; /* rgb(139,92,246) */
  --ptsa: #0ea5e9;        /* rgb(14,165,233) */
  --gap: 6pt;
  --radius: 6pt;
  --font: "Inter", "Helvetica Neue", Arial, sans-serif;
}
* { box-sizing: border-box; }
html, body {
  color: var(--ink);
  background: var(--bg);
  font-family: var(--font);
  font-size: 8.5pt; /* slightly smaller to ensure fit */
  line-height: 1.3;
}
.header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  margin-bottom: 6pt;
}
.title {
  font-size: 14pt;
  font-weight: 700;
}
.subtle { color: var(--muted); }

/* Use flex instead of CSS Grid for WeasyPrint compatibility */
.layout {
  display: flex;
  gap: 10pt;
  align-items: stretch;
}
.year-grid { /* left column */
  flex: 2.35 1 0;
  display: flex;
  flex-wrap: wrap;
  gap: var(--gap);
}
.month {
  border: 1pt solid #e5e7eb;
  border-radius: var(--radius);
  padding: 6pt;
  /* three columns with two gaps in each row */
  width: calc((100% - (2 * var(--gap))) / 3);
  break-inside: avoid;
}
.month header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: 600;
  margin-bottom: 3pt;
}
/* month grid as table for predictable layout */
.month-grid { width: 100%; border-collapse: collapse; table-layout: fixed; }
.month-grid thead th {
  background: #f3f4f6;
  color: var(--muted);
  font-weight: 600;
  font-size: 7pt;
  padding: 2pt 0;
  border: 1pt solid #e5e7eb;
}
.month-grid tbody td {
  position: relative;
  height: 16pt; /* fixed row height */
  border: 1pt solid #e5e7eb;
  vertical-align: middle;
  text-align: center;
  border-radius: 0; /* let table handle shape */
}
.month-grid td .num {
  position: absolute;
  top: 2pt;
  right: 3pt;
  font-size: 7pt;
  color: var(--ink);
}
.day.empty { background: transparent; }
/* Replace color-mix with rgba tints for compatibility */
.day.mark-no_school { background: rgba(239, 68, 68, 0.16); }
.day.mark-half_day { background: rgba(245, 158, 11, 0.18); }
.day.mark-first_day, .day.mark-last_day { background: rgba(16, 185, 129, 0.18); }
.day.mark-early_release { background: rgba(139, 92, 246, 0.18); }
.day.mark-ptsa_event { outline: 1pt solid var(--ptsa); }

/* Right: Important Dates + Legend */
.sidebar {
  flex: 1 1 0;
  border: 1pt solid #e5e7eb;
  border-radius: var(--radius);
  padding: 8pt;
  display: flex;
  flex-direction: column;
  gap: 8pt;
  break-inside: avoid;
}
.legend h3, .important h3 { margin: 0 0 4pt 0; }
.legend ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 4pt;
}
.legend li {
  display: flex;
  align-items: center;
  gap: 6pt;
  font-size: 8pt;
}
.legend li > .chip { flex: 0 0 10pt; }
.chip { width: 10pt; height: 10pt; border-radius: 2pt; }
.chip.no_school { background: var(--no-school); }
.chip.half_day { background: var(--half-day); }
.chip.first_last { background: var(--first-last); }
.chip.early_release { background: var(--early-release); }
.chip.ptsa_event { background: var(--ptsa); border: 1px solid #0369a1; }

.important ul {
  margin: 0;
  padding-left: 12pt;
}
.footer {
  margin-top: 6pt;
  font-size: 7.5pt;
  color: var(--muted);
  display: flex;
  justify-content: space-between;
}

/* Avoid page breaks inside key blocks */
.month, .sidebar, .legend, .important { page-break-inside: avoid; }
