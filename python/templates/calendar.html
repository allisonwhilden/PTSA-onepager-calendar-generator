{% extends "base.html" %}
{% block body %}
<div class="page-wrapper">
  <header class="topbar">
    <div class="title">Horace Mann <span class="accent">PTSA</span> | 2025-26 Calendar</div>
    <div class="logo-area"></div>
  </header>

  <section class="year-grid">
    {% for m in months %}
    <article class="month">
      <header>{{ m.name }} {{ m.year }}</header>
      <table class="month-grid" aria-hidden="true">
        <thead>
          <tr class="dow">
            <th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th>
          </tr>
        </thead>
        <tbody>
          {% for week in m.cells|batch(7) %}
          <tr>
            {% for c in week %}
              {% if c == "" %}
                <td class="day empty"></td>
              {% else %}
                <td class="day{% if c.is_weekend %} weekend{% endif %}{% for t in c.marks %} mark-{{ t }}{% endfor %}{% if c.has_diamond %} diamond{% endif %}{% if c.has_circle %} circle{% endif %}">
                  {% if c.has_diamond or c.has_circle %}<span>{{ c.day }}</span>{% else %}{{ c.day }}{% endif %}{% if c.show_asterisk %}*{% endif %}
                </td>
              {% endif %}
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </article>
    {% endfor %}
  </section>

  <section class="legend-bar">
    <span class="legend-item"><span class="chip no_school"></span> No School</span>
    <span class="legend-item"><span class="chip half_day"></span> Half Day</span>
    <span class="legend-item"><span class="chip closure_possible"></span> Make-up</span>
    <span class="legend-item"><span class="legend-diamond">1</span> First/Last</span>
    <span class="legend-item"><span class="legend-circle">1</span> PTSA</span>
    <span class="legend-item"><span class="bold-demo">Bold</span>=Early Release</span>
    <span class="legend-item"><span class="symbol">*</span>=See Dates</span>
  </section>

  <section class="important">
    {% set half = (important|length + 1) // 2 %}
    <table class="important-dates-table">
      <tr>
        <td>
          {% for e in important[:half] %}
            <div class="date-item {% if e.is_ptsa %}ptsa-event{% else %}district-event{% endif %}"><b>{{ e.when }}</b> {{ e.label }}</div>
          {% endfor %}
        </td>
        <td>
          {% for e in important[half:] %}
            <div class="date-item {% if e.is_ptsa %}ptsa-event{% else %}district-event{% endif %}"><b>{{ e.when }}</b> {{ e.label }}</div>
          {% endfor %}
        </td>
      </tr>
    </table>
  </section>

  <footer class="page-footer">
    <span>Updated {{ meta.generated_at }}</span>
    <span class="separator">|</span>
    <span>Calendar subject to change</span>
    <span class="separator">|</span>
    <span>School year may extend due to weather closures</span>
  </footer>
</div>
{% endblock %}
